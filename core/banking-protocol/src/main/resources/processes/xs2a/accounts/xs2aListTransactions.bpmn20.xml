<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" targetNamespace="http://www.flowable.org/processdef" exporter="Camunda Modeler" exporterVersion="3.4.1">
  <process id="xs2a-ListTransactions" name="listTransactions" isExecutable="true">
    <startEvent id="withConsentStartEvent" flowable:formFieldValidation="true" />
    <serviceTask id="withConsentExecution" name="withConsentExecution" flowable:delegateExpression="${xs2aTransactionListing}" />
    <callActivity id="consentCreationActivity" name="consentCreationActivity" calledElement="xs2a-TransactionListCreateConsent" flowable:inheritVariables="true" flowable:fallbackToDefaultTenant="false">
      <extensionElements>
        <flowable:out source="CONTEXT" target="CONTEXT" />
      </extensionElements>
    </callActivity>
    <exclusiveGateway id="consentPresentSelector" name="consentPresentSelector" default="consentMissing" />
    <sequenceFlow id="sid-4509A6B0-4428-4A8B-9738-6D78EA57712B" sourceRef="withConsentStartEvent" targetRef="consentPresentSelector" />
    <endEvent id="withConsentEndEvent" />
    <sequenceFlow id="sid-7F28CD0E-9F15-4110-A23C-E3F619F3F420" sourceRef="withConsentExecution" targetRef="withConsentEndEvent" />
    <sequenceFlow id="consentMissing" sourceRef="consentPresentSelector" targetRef="consentCreationActivity" />
    <sequenceFlow id="consentPresent" sourceRef="consentPresentSelector" targetRef="withConsentExecution">
      <conditionExpression xsi:type="tFormalExpression">#{xs2aConsentFinder.consentExists()}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-66819A9E-0591-4334-95D1-64A681AEA554" sourceRef="consentCreationActivity" targetRef="withConsentExecution" />
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_listTransactions">
    <bpmndi:BPMNPlane id="BPMNPlane_listTransactions" bpmnElement="xs2a-ListTransactions">
      <bpmndi:BPMNShape id="BPMNShape_listTransactionsStartEvent" bpmnElement="withConsentStartEvent">
        <omgdc:Bounds x="160" y="163" width="30" height="30" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_listTransactionsExecution" bpmnElement="withConsentExecution">
        <omgdc:Bounds x="375" y="64" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_consentCreationActivity" bpmnElement="consentCreationActivity">
        <omgdc:Bounds x="375" y="285" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_consentPresentSelector" bpmnElement="consentPresentSelector" isMarkerVisible="true">
        <omgdc:Bounds x="235" y="158" width="40" height="40" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="210" y="198" width="90" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_listTransactionsEndEvent" bpmnElement="withConsentEndEvent">
        <omgdc:Bounds x="570" y="90" width="28" height="28" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="541" y="118" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_sid-66819A9E-0591-4334-95D1-64A681AEA554" bpmnElement="sid-66819A9E-0591-4334-95D1-64A681AEA554">
        <omgdi:waypoint x="425" y="285" />
        <omgdi:waypoint x="425" y="143.95" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_sid-B238270C-F836-45CE-92C9-65B8B6F8BFC9" bpmnElement="consentPresent">
        <omgdi:waypoint x="268.8995901639344" y="171.9344262295082" />
        <omgdi:waypoint x="375" y="125.7429411764706" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_sid-F6FD0347-EF1E-47BA-8E77-E7E096983E43" bpmnElement="consentMissing">
        <omgdi:waypoint x="265.69850993377486" y="187.251261829653" />
        <omgdi:waypoint x="378.7358041482489" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_sid-4509A6B0-4428-4A8B-9738-6D78EA57712B" bpmnElement="sid-4509A6B0-4428-4A8B-9738-6D78EA57712B">
        <omgdi:waypoint x="189.9499971460684" y="178" />
        <omgdi:waypoint x="235" y="178" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_sid-7F28CD0E-9F15-4110-A23C-E3F619F3F420" bpmnElement="sid-7F28CD0E-9F15-4110-A23C-E3F619F3F420">
        <omgdi:waypoint x="474.95000000000005" y="104" />
        <omgdi:waypoint x="570" y="104" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
