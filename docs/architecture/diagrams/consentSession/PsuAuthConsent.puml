@startuml

autonumber "<b><color blue>[00]"
actor psu

box "PsuUserAgent" #LightGray
    participant "FinTechUI" as FinTechUI
    participant "PsuTppConsentSessionUI" as PsuTppConsentSessionUI
    participant "PsuAspspConsentSessionUI" as PsuAspspConsentSessionUI
end box
box "FinTechDC" #DarkSeaGreen
    participant "FinTechApi" as FinTechApi
end box
box "TppDC" #LightGray
    participant "TppBankingApi" as TppBankingApi
    participant "TppConsentSessionApi" as TppConsentSessionApi
end box
box "AspspDC" #LightSkyBlue
    participant "AspspConsentSessionApi" as AspspConsentSessionApi
end box

psu -> FinTechUI ++ : requestService
FinTechUI -> FinTechApi ++ : initiateConsent\n[UserAgentContext, PsuFintechSession]\n(ConsentData)
FinTechApi -> TppBankingApi ++ : initiateConsent\n[UserAgentContext, FinTechContext]\n(ConsentData)
TppBankingApi -> AspspConsentSessionApi ++ : initiateConsent\n[UserAgentContext, TppContext]\n(ConsentData) 
return redirectTo_AspspConsentSessionApi(AspspRedirectInfo)
return redirectTo_TppConsentSessionApi(TppRedirectInfo)
return redirect302[TppConsentSessionApi, PsuFintechSession]()<authCode>
return display PsuTppConsentSessionUI
'return redirect302[TppConsentSessionApi, PsuFintechSession]()
@enduml
